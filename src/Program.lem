type 'partial error =
  | Undefined of 'partial
  | Bug of string

type ('a, 'partial) t = ('a, 'partial error) Exception.t

let unit = Exception.unit
let bind = Exception.bind
let map = Exception.map
let app = Exception.app

let undefined m = Exception.fail (Undefined m)
let bug       m = Exception.fail (Bug       m)

let fail = bug
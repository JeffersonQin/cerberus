#include "cerberus.h"
/* Generated by CIL v. 1.7.3 */
/* print_CIL_Input is false */

struct PgHdr;
typedef struct PgHdr PgHdr;
typedef unsigned char u8;
struct __anonstruct_x_1 {
   unsigned int pgno ;
   PgHdr *pNextHash ;
   PgHdr *pPrevHash ;
   PgHdr *pNextFree ;
   PgHdr *pPrevFree ;
   PgHdr *pNextAll ;
   u8 inJournal ;
   short nRef ;
   PgHdr *pDirty ;
   PgHdr *pPrevDirty ;
   unsigned int notUsed ;
};
struct PgHdr {
   int y ;
   struct __anonstruct_x_1 x ;
};
/* compiler builtin: 
   void *__builtin_memset(void * , int  , int  ) ;  */
extern void abort(void) ;
PgHdr **xx  ;
int volatile   vx  ;
__inline static PgHdr *merge_pagelist(PgHdr *pA , PgHdr *pB ) 
{ 
  PgHdr result ;
  PgHdr *pTail ;

  {
  xx = & result.x.pDirty;
  pTail = & result;
  while (pA && pB) {
    if (pA->x.pgno < pB->x.pgno) {
      pTail->x.pDirty = pA;
      pTail = pA;
      pA = pA->x.pDirty;
    } else {
      pTail->x.pDirty = pB;
      pTail = pB;
      pB = pB->x.pDirty;
    }
    vx = (*xx)->y;
  }
  if (pA) {
    pTail->x.pDirty = pA;
  } else
  if (pB) {
    pTail->x.pDirty = pB;
  } else {
    pTail->x.pDirty = 0;
  }
  return (result.x.pDirty);
}
}
PgHdr *( __attribute__((__noinline__)) sort_pagelist)(PgHdr *pIn ) 
{ 
  PgHdr *a[25] ;
  PgHdr *p ;
  int i ;

  {
  __builtin_memset(a, 0, sizeof(a));
  while (pIn) {
    p = pIn;
    pIn = p->x.pDirty;
    p->x.pDirty = 0;
    i = 0;
    while (i < 24) {
      if ((unsigned long )a[i] == (unsigned long )((PgHdr *)0)) {
        a[i] = p;
        break;
      } else {
        p = merge_pagelist(a[i], p);
        a[i] = 0;
        a[i] = 0;
      }
      i ++;
    }
    if (i == 24) {
      a[i] = merge_pagelist(a[i], p);
    }
  }
  p = a[0];
  i = 1;
  while (i < 25) {
    p = merge_pagelist(p, a[i]);
    i ++;
  }
  return (p);
}
}
int main(void) 
{ 
  PgHdr a[5] ;
  PgHdr *p ;

  {
  a[0].x.pgno = 5;
  a[0].x.pDirty = & a[1];
  a[1].x.pgno = 4;
  a[1].x.pDirty = & a[2];
  a[2].x.pgno = 1;
  a[2].x.pDirty = & a[3];
  a[3].x.pgno = 3;
  a[3].x.pDirty = 0;
  p = sort_pagelist(& a[0]);
  if ((unsigned long )p->x.pDirty == (unsigned long )p) {
    abort();
  }
  return (0);
}
}
